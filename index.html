<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>فحص الاتصال</title>
</head>
<body>
    <h1>فحص اتصال فايربيز</h1>
    <button id="testBtn" style="padding: 10px 20px; font-size: 20px;">اضغط لاختبار الاتصال</button>
    <p id="status" style="color: red; font-weight: bold;"></p>

    <script type="module">
        // 1. تأكد أنك وضعت بياناتك الحقيقية هنا
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getFirestore, collection, addDoc } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

        // ⚠️⚠️ ضع بيانات مشروعك الحقيقية هنا بدلاً من الاصفار ⚠️⚠️
        const firebaseConfig = {
            apiKey: "ضع_الAPI_KEY_الخاص_بك_هنا",
            authDomain: "xxxx.firebaseapp.com",
            projectId: "xxxx",
            storageBucket: "xxxx.appspot.com",
            messagingSenderId: "xxxx",
            appId: "xxxx"
        };

        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);
        const statusText = document.getElementById("status");

        document.getElementById("testBtn").addEventListener("click", async () => {
            statusText.innerText = "جاري محاولة الاتصال...";
            try {
                await addDoc(collection(db, "test_connection"), {
                    msg: "Hello from Amir",
                    time: new Date()
                });
                statusText.style.color = "green";
                statusText.innerText = "✅ نجح الاتصال! المشكلة تم حلها.";
                alert("تم الاتصال بنجاح! البيانات الآن تظهر في قاعدة البيانات.");
            } catch (error) {
                statusText.style.color = "red";
                statusText.innerText = "❌ فشل الاتصال: " + error.message;
                console.error(error);
                alert("خطأ: " + error.message);
            }
        });
    </script>
</body>
</html>
